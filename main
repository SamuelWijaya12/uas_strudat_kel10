#include<stdio.h>
#include<stdlib.h>
#include<conio.h>
#include<unistd.h>
#include<string.h>


struct node{
	int noantrian;
	char nama[50];
	char npm[50];
	char fakultas[50];
	char prodi[50];
	struct node *next;
}; typedef node node;

int noantrian = 0;

void login(node **head){
	
	node *temp, *pNew;
	
	pNew = (node *)malloc(sizeof(node));
	noantrian++;
	
	fflush(stdin);
    pNew->noantrian = noantrian;

		printf("Nama : ");
		gets(pNew->nama);
		
		printf("NPM: ");
        scanf("%s", &pNew->npm);     
		
    	printf("Fakultas : ");
    	scanf("%s", &pNew->fakultas);
    	
    	printf("Program Studi : ");
    	scanf("%s", &pNew->prodi);

    	
    	pNew->next = NULL;
    	if(*head == NULL){
        	*head = pNew;
    	}else{
        	temp = *head;
        	while(temp->next != NULL){
        	    temp = temp->next;
			}
        	temp->next = pNew;
    	}	
}



void daftarantrian(node *head){
	
	struct node *pWalker;
	
	pWalker = head;
	system("cls");
	printf("---------------- [ DAFTAR NAMA ANTRIAN ] ----------------\n\n\n");
    if(head == NULL){
        printf("                   ANTRIAN KOSOSNG						 \n");
    } 
    else{
        printf("        ====================================\n");
        printf("        ||                                ||\n");
        printf("        ||          [DAFTAR ANTRIAN]      ||\n");
        printf("        ||                                ||\n");
        printf("        ====================================\n");
 
        while(pWalker != NULL){
        	printf("                          || \n");
			printf("                          || \n");
    		printf("        ------------------------------------\n");
			printf("        | Nomor Antrian : %d\n", pWalker->noantrian);
			printf("        | Nama            : %s\n", pWalker->nama);
			printf("        | NPM             : %s\n", pWalker->npm);
			printf("        | Fakultas        : %s\n", pWalker->fakultas);
			printf("        | Program Studi   : %s\n", pWalker->prodi);
			printf("        ------------------------------------\n");        	
            pWalker = pWalker->next;
        }
    }
} 

void ambilktm{
	
}
int count(struct node *head)
{
	int count = 0;
	struct node *pPre;
	pPre = head;
	
	while(pPre!=0)
	{
		count++;
		pPre = pPre->next;
	}
	printf("\n----------------------------");
	printf("\nTOTAL ANTRIAN SAAT INI : %d\n",count);
	printf("----------------------------\n");
	return count;
}	


int main()
{
	node *head = NULL;
	int select;
	
	do{
		system("cls");
		
		printf("=====================================================\n");
		printf("|               PENGAMBILAN KTM MAHASISWA           |\n");
		printf("=====================================================\n");
		printf("|1. Masuk Antrian Pengambilan KTM                   |\n");
		printf("|2. Masuk Ruangan Pengambilan KTM                   |\n");
		printf("|3. Keluar Ruangan Pengambilan KTM                  |\n"); 
		printf("|3. KELUAR                                          |\n");
		printf("=====================================================\n");
		printf("PILIHAN ANDA : ");
		scanf("%d",&select);
		
		system("cls");	
		if (select==1){
			login(&head);
			system("cls");
			system("PAUSE");
			printf("Data Berhasil di Inputkan");
		}else if(select==2){
			daftarantrian(head);
			system("PAUSE");
		}else if(select==3){
			printf("\n");
			exit(0);
			
		}
		else{
			printf("\nERR : PILIHAN TIDAK DITEMUKAN\n");
			system("PAUSE");		
		}
	}while(select!=3);
}
